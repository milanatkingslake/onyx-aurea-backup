<?xml version="1.0" encoding="utf-8"?>
<html MadCap:check_list="Ran Smart Index" MadCap:timeEstimate="0" MadCap:priority="0" MadCap:status="In Progress" MadCap:lastBlockDepth="4" MadCap:lastHeight="791" MadCap:lastWidth="624" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../Resources/Stylesheets/ApteanOLH.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <head><title>parameters XML (OnyxCollectionManager)</title>
            <link href="../../Resources/Stylesheets/ApteanOLH.css" rel="stylesheet" type="text/css" />
        </head>
        <h4>
            <MadCap:keyword term="parameters" />
            <MadCap:keyword term="parameters XML" />parameters XML</h4>
        <p>The <a href="OnyxCollectionManager.htm"><MadCap:keyword term="OnyxCollectionManager" />OnyxCollectionManager</a> step 
 component breaks the collection of object instances in the input parameters 
 XML into single objects. For each instance, OnyxCollectionManager calls 
 the method implemented on the specified objectType that corresponds to 
 the action attribute. Thus, instead of processing the actions internally 
 as a typical saveCollection method does, OnyxCollectionManager packages 
 the XML as a series of independent parameters nodes.</p>
        <p>Here are the steps the component takes to execute 
 a saveCollection method:</p>
        <ol>
            <li>Instantiates the OnyxTransactionManager and acquires 
 a pointer to the <a href="OTM_ITM.htm">IInternalTransactionManager</a> 
 interface.</li>
            <li>Constructs a <a href="OTM_Step_Pkg.htm">stepPackage</a>, 
 which the single method steps reference to perform the required operations 
 on all the objects in the collection.</li>
            <li>Looks up the name of the collections node from 
 the dataPath and the object node from the stepObject named values in the 
 <a href="stepAdditionalData_collectionManager.htm">stepAdditionalData</a>.</li>
            <li>Copies one object instance at a time into the 
 stepPackage.</li>
            <li>Invokes InternalTransactionManager on the given 
 object instance.</li>
            <li>Calls the method specified by the action attribute 
 on the object instance. If an action attribute is not insert, update, 
 or delete, OnyxCollectionManager flags it as an error.</li>
            <li>When the call returns an error, copies error nodes 
 and the entire object node from the parametersReturn of the single method 
 to the <a href="parametersReturn_XML_collectionManager.htm">parametersReturn</a> 
 of the method that invoked the OnyxCollectionManager step.</li>
            <li>When the call succeeds, ensures that the collectionId 
 attribute and the action attribute are present in the object node that 
 OnyxCollectionManager copies to the parametersReturn node.</li>
        </ol>
        <p style="font-weight: bold;">Example</p>
        <p>The workTickets saveCollection method, which implements an OnyxCollectionManager 
 step, accepts the following input parameters, which is typical input for 
 any saveCollection method.</p>
        <p>
            Input parameters for saveCollection
        </p>
        <p Class="Code" class="code">&lt;parameters&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&lt;workTickets objectType="workTicket" collection="1"&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;workTicket objectType="workTicket" action="insert"&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;primaryId/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;secondaryId/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;typeId&gt;3&lt;/typeId&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;productId/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;description&gt;Doll sings Silent Night instead of Jingle Bells&lt;/description&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;insertDate/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;insertBy/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;updateDate/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;updateBy/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;onyxTimestamp/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;privateAccess/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;readOnlyAccess/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;/workTicket&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;workTicket objectType="workTicket" action="update"&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;primaryId&gt;805E4E93-C8CA-4A7F-AEB1-BD63E1EC2541&lt;/primaryId&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;statusId&gt;135&lt;/statusId&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;onyxTimestamp&gt;121436029&lt;/onyxTimestamp&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;/workTicket&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;workTicket objectType="workTicket" action="delete"&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;primaryId&gt;2A0962165AD0486BB32E9F4077D2BAC5&lt;/primaryId&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;onyxTimestamp&gt;112583390&lt;/onyxTimestamp&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;/workTicket&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&lt;/workTickets&gt;</p>
        <p Class="Code" class="code">&lt;/parameters&gt;</p>
        <p>Internally, OnyxCollectionManager breaks this input XML into three IInternalTransactionManager 
 Execute method calls, each of which specifies the object method to execute.</p>
        <p>Insert method:</p>
        <p Class="Code" class="code">&lt;parameters&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&lt;workTicket objectType="workTicket"&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;primaryId/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;secondaryId/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;typeId&gt;3&lt;/typeId&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;productId/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;description&gt;Doll sings Silent Night instead of Jingle Bells&lt;/description&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;insertDate/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;insertBy/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;updateDate/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;updateBy/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;onyxTimestamp/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;privateAccess/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;readOnlyAccess/&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&lt;/workTicket&gt;</p>
        <p Class="Code" class="code">&lt;/parameters&gt;</p>
        <p>Update method:</p>
        <p Class="Code" class="code">&lt;parameters&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&lt;workTicket objectType="workTicket"&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;primaryId&gt;805E4E93-C8CA-4A7F-AEB1-BD63E1EC2541&lt;/primaryId&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;statusId&gt;135&lt;/statusId&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;onyxTimestamp&gt;121436029&lt;/onyxTimestamp&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&lt;/workTicket&gt;</p>
        <p Class="Code" class="code">&lt;/parameters&gt;</p>
        <p>Delete method:</p>
        <p Class="Code" class="code">&lt;parameters&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&lt;workTicket objectType="workTicket"&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;primaryId&gt;2A0962165AD0486BB32E9F4077D2BAC5&lt;/primaryId&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&#160;&#160;&#160;&lt;onyxTimestamp&gt;112583390&lt;/onyxTimestamp&gt;</p>
        <p Class="Code" class="code">&#160;&#160;&#160;&lt;/workTicket&gt;</p>
        <p Class="Code" class="code">&lt;/parameters&gt;</p>
    </body>
</html>